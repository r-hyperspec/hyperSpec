<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert principal component decomposition or the like into a hyperSpec object — decomposition • hyperSpec</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Convert principal component decomposition or the like into a hyperSpec object — decomposition"><meta property="og:description" content="Decomposition of the spectra matrix is a common procedure in chemometric
data analysis. scores and loadings convert the result matrices
into new hyperSpec objects."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hyperSpec</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.200.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-book"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Documentation for version of package:</li>
    <li>
      <a href="https://r-hyperspec.github.io/hyperSpec/" class="external-link">Released</a>
    </li>
    <li>
      <a href="https://r-hyperspec.github.io/hyperSpec/dev/" class="external-link">In-development</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/hyperSpec.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/fileio.html">Import and Export Files with Spectra</a>
    </li>
    <li>
      <a href="../articles/plotting.html">Plotting Functions in "hyperSpec"</a>
    </li>
    <li>
      <a href="../articles/baseline.html">Fitting Baselines to Spectra</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-hyperspec/hyperSpec/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert principal component decomposition or the like into a <code>hyperSpec</code> object</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-hyperspec/hyperSpec/blob/HEAD/R/decomposition.R" class="external-link"><code>R/decomposition.R</code></a></small>
    <div class="hidden name"><code>decomposition.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Decomposition of the spectra matrix is a common procedure in chemometric
data analysis. <code>scores</code> and <code>loadings</code> convert the result matrices
into new <code>hyperSpec</code> objects.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">decomposition</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  wavelength <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">label.wavelength</span>,</span>
<span>  <span class="va">label.spc</span>,</span>
<span>  scores <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  retain.columns <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>A <code>hyperSpec</code> object.</p></dd>


<dt>x</dt>
<dd><p>matrix with the new content for <code>object@data$spc</code>.</p>
<p>Its size must correspond to rows (for <code>scores</code>) and to either columns
or rows (for <code>loadings</code>) of <code>object</code>.</p></dd>


<dt>wavelength</dt>
<dd><p>for a scores-like <code>x</code>: the new <code>object@wavelength</code>.</p></dd>


<dt>label.wavelength</dt>
<dd><p>The new label for the wavelength axis (if <code>x</code>
is scores-like). If not given, the label of <code>object</code> is kept.</p></dd>


<dt>label.spc</dt>
<dd><p>The new label for the spectra matrix. If not given, the
label of <code>object</code> is kept.</p></dd>


<dt>scores</dt>
<dd><p>is <code>x</code> a scores-like matrix?</p></dd>


<dt>retain.columns</dt>
<dd><p>for loading-like decompostition (i.e. <code>x</code> holds
loadings, pure component spectra or the like), the data columns need
special attention.</p>
<p>Columns with different values across the rows will be set to <code>NA</code> if
<code>retain.columns</code> is <code>TRUE</code>, otherwise they will be deleted.</p></dd>


<dt>...</dt>
<dd><p>ignored.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>hyperSpec</code> object, updated according to <code>x</code></p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Multivariate data are frequently decomposed by methods like principal
component analysis, partial least squares, linear discriminant analysis, and
the like.  These methods yield latent spectra (or latent variables,
loadings, components, ...) that are linear combination coefficients
along the wavelength axis and scores for each spectrum and loading.</p>
<p>The loadings matrix gives a coordinate transformation, and the scores are
values in that new coordinate system.</p>
<p>The obtained latent variables are spectra-like objects: a latent variable
has a coefficient for each wavelength. If such a matrix (with the same
number of columns as <code>object</code> has wavelengths) is given to
<code>decomposition</code> (also setting <code>scores = FALSE</code>), the spectra
matrix is replaced by <code>x</code>. Moreover, all columns of <code>object@data</code>
that did not contain the same value for all spectra are set to <code>NA</code>.
Thus, for the resulting <code>hyperSpec</code> object, <code><a href="plot_spc.html">plot_spc()</a></code> and
related functions are meaningful. <code><a href="levelplot.html">plotmap()</a></code> cannot be
applied as the loadings are not laterally resolved.</p>
<p>The scores matrix needs to have the same number of rows as <code>object</code> has
spectra. If such a matrix is given, <code>decomposition</code> will replace the
spectra matrix is replaced by <code>x</code> and <code>object@wavelength</code> by
<code>wavelength</code>. The information related to each of the spectra is
retained. For such a <code>hyperSpec</code> object, <code><a href="levelplot.html">plotmap()</a></code> and
<code><a href="plotc.html">plotc()</a></code> and the like can be applied. It is also possible to use
the spectra plotting, but the interpretation is not that of the spectrum any
longer.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>See <a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a> for matrix multiplication of <code>hyperSpec</code> objects.</p>
<p>See e.g. <code><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">stats::prcomp()</a></code> and <code><a href="https://rdrr.io/r/stats/princomp.html" class="external-link">stats::princomp()</a></code> for
principal component analysis, and package <code>pls</code> for Partial Least
Squares Regression.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>C. Beleites</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">pca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp</a></span><span class="op">(</span><span class="va">flu</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pca.loadings</span> <span class="op">&lt;-</span> <span class="fu">decomposition</span><span class="op">(</span><span class="va">flu</span>, <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">pca</span><span class="op">$</span><span class="va">rotation</span><span class="op">)</span>, scores <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pca.center</span> <span class="op">&lt;-</span> <span class="fu">decomposition</span><span class="op">(</span><span class="va">flu</span>, <span class="va">pca</span><span class="op">$</span><span class="va">center</span>, scores <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pca.scores</span> <span class="op">&lt;-</span> <span class="fu">decomposition</span><span class="op">(</span><span class="va">flu</span>, <span class="va">pca</span><span class="op">$</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">pca.center</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="decomposition-1.png" alt="" width="466" height="288"></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">pca.loadings</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"gray50"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="decomposition-2.png" alt="" width="466" height="288"></span>
<span class="r-in"><span><span class="fu"><a href="plotc.html">plotc</a></span><span class="op">(</span><span class="va">pca.scores</span>, groups <span class="op">=</span> <span class="va">.wavelength</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="decomposition-3.png" alt="" width="466" height="288"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Claudia Beleites, <a href="https://orcid.org/0000-0002-9500-5167" class="external-link">Vilmantas Gegzna</a>, <a href="http://academic.depauw.edu/hanson_web/" class="external-link">Bryan A. Hanson</a>, Roman Kiselev, Erick Oduniyi, Valter Sergo.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer></div>

  


  

  </body></html>

